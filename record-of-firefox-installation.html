<!DOCTYPE html>
<!--(¯`·.¸¸.·´¯`·.¸¸.-> ĊÄĻĻ MË ĻŮŚÏŖ <-.¸¸.·´¯`·.¸¸.·´¯)-->
<html lang="en-US">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="format-detection" content="telephone=no">
<meta name="renderer" content="webkit">
<meta name="author" content="Nero Zheng" />
<meta name="generator" content="Pelican" />
<meta name="description" content="Firefox 安装记录 - 作者：Nero Zheng，首发于『擼sirの避風港』">
<title>Firefox 安装记录 - 擼sirの避風港</title>
<link href="https://lusir.me/atom.xml" type="application/atom+xml" rel="alternate" title="『擼sirの避風港』Atom Feed" />
<link href="https://lusir.me/rss.xml" type="application/rss+xml" rel="alternate" title="『擼sirの避風港』Rss Feed" />
<link rel="shortcut icon" type="image/x-icon" href="/images/favicon/favicon.ico" />
<link rel="apple-touch-icon" sizes="114x114" href="/images/favicon/apple-touch-icon-114x114.png" />
<link rel="icon" type="image/png" href="/images/favicon/favicon-32x32.png" sizes="32x32" />
<script src="/theme/js/basket.min.js"></script>
<script>
basket.require({ url: '/theme/css/bootstrap.min.css' },{ url: '/theme/css/niu2.css', unique: 0.2 },{ url: '/theme/font-awesome/css/font-awesome.min.css' },{ url: '/theme/css/pygments/github.css' },{ url: '/theme/css/jquery.fancybox.min.css' },{ url: '/theme/css/gitalk.css' })
.then(function(responses) {
_stylesheet.appendStyleSheet(responses[0], function() {});
	basket.require({ url: '/theme/js/bootstrap.min.js' },{ url: '/theme/js/niu2.js', unique: 0.2 },{ url: '/theme/js/fancy-loading.js' },{ url: '/theme/js/jquery.fancybox.js' },{ url: '/theme/js/jquery-3.5.1.min.js' },{ url: '/theme/js/slimbox2.js' },{ url: '/theme/js/APlayer.min.js' },{ url: '/theme/js/gitalk.min.js' },{ url: '/theme/js/tagcloud.min.js' });});
</script>
<link rel="stylesheet" href="/theme/css/bootstrap.min.css">
<link rel="stylesheet" href="/theme/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="/theme/css/niu2.css">
<link rel="stylesheet" href="/theme/css/pygments/github.css">
<link rel="stylesheet" href="/theme/css/jquery.fancybox.min.css">
<link rel="stylesheet" href="/theme/css/gitalk.css">
<link rel="canonical" href="https://lusir.me/record-of-firefox-installation.html" />
<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
<script src="/theme/js/html5shiv.js"></script>
<script src="/theme/js/respond.min.js"></script>
<![endif]-->
<!--[if IE 7]>
<link rel="stylesheet" href="/theme/font-awesome/css/font-awesome-ie7.min.css">
<![endif]-->
</head>

<body itemscope itemtype="http://schema.org/WebPage"> 
<meta itemprop="inLanguage" content="zh-CN">
<div id="body-header">
<div class="navbar navbar-inverse navbar-fixed-top">
<div class="col-md-12">
<div class="navbar-header">
<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a class="navbar-brand" href="https://lusir.me"><i class="fa fa-home"></i>擼sirの避風港</a>
</div>
<nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
<ul class="nav navbar-nav">
<li><a href="https://lusir.me/gallery.html" title="图册"><i class="fa fa-picture-o"></i>图册</a></li>
<li><a href="https://lusir.me/archives.html" title="存档"><i class="fa fa-archive"></i>存档</a></li>
<li><a href="https://lusir.me/tag/" title="标签"><i class="fa fa-tag"></i>标签</a></li>
<!-- category dropdown list -->
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-folder-open"></i>分类<b class="caret"></b></a>
<ul class="dropdown-menu">
<li><a href="https://lusir.me/life/index.html"><i class="fa fa-coffee"></i>日常(1)</a></li>
<li><a href="https://lusir.me/record/index.html"><i class="fa fa-book"></i>记录(17)</a></li>
</ul>
</li>
<!--  self defined dropdown list --></ul>
<!-- right nav bar -->
<ul class="nav navbar-nav navbar-right">
<!-- google custom search --><li>
<div id="niu2-cse-wrapper">
<div id="niu2-cse-header-box" class="navbar-form navbar-nav">
<form action="/search.html" method="get">
<div class="form-group">
<input id="niu2-cse-search-input" class="niu2-cse-header form-control" type="text" name="q" placeholder="回车以搜索…" />
</div>
</form>
</div>
<div id="niu2-cse-ctrl-box" class="navbar-nav"><i id="niu2-cse-search-image" class="fa fa-search navbar-nav"></i><span id="niu2-cse-search-text">搜索</span></div>
</div>
</li></ul>
</nav>
</div>
</div></div>

<div id="body-content" itemscope="itemscope" itemtype="https://schema.org/Article"><div class="col-md-8 col-md-offset-2"><h1 id="content-heading" itemprop="headline">Firefox 安装记录</h1>
<div class="post-meta" itemprop="datePublished">Oct 01,2020</div></div>
<div id="niu2-left-container" class="col-md-6 col-md-offset-2">
<div id="niu2-main-content" itemprop="articleBody">
<p>记录一下 Firefox 66 版本的安装过程。
</p>
<h3 id="7f95901ea7943d724c39c5d87416c5a5">安装及语言包</h3>
<ol>
<li>下载安装包，<a href="https://download-installer.cdn.mozilla.net/pub/firefox/releases/68.7.0esr/win64/en-US/Firefox%20Setup%2068.7.0esr.exe" title="Firefox 安装包">下载地址</a>；</li>
<li>解压文件，复制 core 目录的内容到 <code>D:\Program File\Firefox\</code> 下；</li>
<li>下载语言包，<a href="https://ftp.mozilla.org/pub/firefox/releases/68.7.0esr/win64/xpi/zh-CN.xpi" title="Firefox 语言包">下载地址</a>并安装；</li>
<li>便携化后在浏览器 <code>about:config</code> 中添加 <code>string</code> 类项目 <code>intl.locale.requested</code>，值为 <code>zh-CN</code>。</li>
</ol>
<h3 id="a7861ba08459c0205f8db95964e612c3">便携化</h3>
<ol>
<li>下载 <code>libportable</code> 便携化 Firefox，设置 <code>portable.ini</code> 中的选项如下：</li>
</ol>
<div class="codehilite"><pre>Portable=1
PortableDataPath=./Profiles
TmpDataPath=./Profiles/Cache
</pre></div>


<ol>
<li>在 Firefox 快捷方式属性中的“启动路径”参数后添加 <code>-p</code>，设置配置文件路径与 <code>PortableDataPath</code> 一致，配置完成可删除快捷方式中的 <code>-p</code> 参数；</li>
</ol>
<h3 id="0563f7233e15ac00e6bcfca103c15c96">禁用更新</h3>
<p>在 Firefox 程序根目录新建 <code>distribution</code> 文件夹并新建 <code>policies.json</code> 文件，填入以下内容：</p>
<div class="codehilite"><pre>{&quot;policies&quot;: {&quot;DisableAppUpdate&quot;: true}}
</pre></div>


<h3 id="01820262aa9ad5b130f8f5b86bfd2968">自定义选项</h3>
<p>在配置文件夹目录 <code>./Profiles</code> 下新建 <code>user.js</code> 文件，其中 <code>user_pref(key,value)</code> 等同于从 <code>about:config</code> 修改，删除之后，修改的设置仍然有效。<code>pref(key,value)</code> 删除之后，修改的设置将失效。例如：</p>
<div class="codehilite"><pre>pref(&quot;accessibility.force_disabled&quot;, 0); //禁用无障碍环境
pref(&quot;network.http.speculative-parallel-limit&quot;, 0); //禁用后台数据回传
user_pref(&quot;extensions.webservice.discoverURL&quot;, &quot;127.0.0.1&quot;); //关闭获取附加组件建议
pref(&quot;lightweightThemes.update.enabled&quot;, 0); //关闭轻量主题建议
user_pref(&quot;view_source.editor.path&quot;, &quot;D:\\Program Files\\Notepad++\\Notepad++.exe&quot;);
user_pref(&quot;findbar.highlightAll&quot;, true); //ctrl+F关键词高亮
pref(&quot;network.standard-url.enable-rust&quot;, true); //Rust的URL解析器
pref(&quot;network.tcp.tcp_fastopen_enable&quot;, true); //TCP快速启用过滤,减少http延迟
pref(&quot;browser.xul.error_pages.expert_bad_cert&quot;, true); //自动展开：此连接是不受信任的
pref(&quot;network.IDN_show_punycode&quot;, true);
user_pref(&quot;xpinstall.signatures.required&quot;,false); //可以安装未在AMO被验证扩展
</pre></div>


<h3 id="2f3f8e816f105ec416109a13c38715c0">安装扩展</h3>
<ul>
<li>暴力猴</li>
<li>闪耀拖拽</li>
<li>Header Editor</li>
<li>Proxy SwitchyOmega</li>
<li>uBlock Origin</li>
<li>xStyle</li>
<li>mozlz4-edit</li>
</ul>
<h3 id="e57710fdea07b767d19115e4d011305d">更改默认搜索引擎</h3>
<ol>
<li>
<p>将 <code>.\aProfiles\search.json.mozlz4</code> 文件拖入mozlz4-edit 编辑器中，删除不需要的引擎及搜索关键字中的多余参数，修改完成后另存为 <code>search.json.mozlz4</code> 文件，退出 Firefox 后覆盖源文件；</p>
</li>
<li>
<p>用 WinRar 或类似程序打开 Firefox 目录下的 <code>browser\omni.ja</code> 文件，浏览到 <code>\chrome\browser\search-extensions</code>，删除目录下不需要的搜索引擎子目录；</p>
</li>
<li>
<p>打开 <code>list.json</code>，滑到最底部，编辑"zh-CN"下的对应项目；</p>
</li>
<li>
<p>进入搜索引擎子目录，修改 <code>manifest.json</code> 文件及 <code>_locales</code> 目录下的 <code>messages.json</code> 文件。</p>
</li>
<li>
<p>备份修改好的 <code>list.json</code>、<code>manifest.json</code>、<code>messages.json</code> 及 <code>search.json.mozlz4</code> 文件，Firefox 后期更新时覆盖即可。</p>
</li>
</ol>
<h3 id="5e0e75872765ca2b4be97f02e8b9f161">UserChrome 脚本</h3>
<p>使用Endor8的<a href="https://github.com/Endor8/userChrome.js/tree/master/userChrome" title="userChrome脚本">方案</a>，下载压缩包。开启方式如下：</p>
<ol>
<li>
<p>将 <code>config.js</code> 及 <code>userChromeJS</code> 目录放在 Firefox 安装根目录下；</p>
</li>
<li>
<p><code>config-prefs.js</code> 放在 Firefox 安装目录 <code>\defaults\pref</code> 下，在 <code>config-pref.js</code> 中加上：<code>pref("general.config.sandbox_enabled", false);</code> </p>
</li>
<li>
<p><code>userChrome.js</code> 放在配置文件夹 <code>.\Profiles\chrome</code> 下，UC 脚本放入 <code>SubScript</code> 子目录中（子目录增删改可以通过修改 <code>userChrome.js</code> 中的 <code>var arrSubdir</code> 参数进行添加修改）。</p>
</li>
</ol>
<h3 id="97597e33dcb31dc732ff2454e5a15e7c">使用的 UC 脚本</h3>
<ul>
<li>addMenuPlus.uc（修改右键菜单）</li>
<li>KeyChanger.uc（快捷键）</li>
<li>MouseGestures2_e10s.uc（鼠标手势）</li>
<li>textLink.uc（文字链接双击打开）</li>
</ul>
<h3 id="930a6f373755d3370c09966d944d0a6d">使用的油猴脚本</h3>
<ul>
<li>Picviewer CE+</li>
<li>知乎真实链接地址重定向</li>
</ul>
<h3 id="f085b3dae221da03c58f538db635cd6e">UserChrome.css 脚本</h3>
<p>通过修改该文件隐藏浏览器界面上的“三道杠”按钮。</p>
<ol>
<li>在浏览器中打开 <code>chrome://browser/content/browser.xul</code>，<code>F12</code> 查询“三道杠”的元素 id 为 <code>PanelUI-menu-button</code>，</li>
<li>在 <code>userChrome.css</code> 中添加 <code>#PanelUI-menu-button {display: none !important;}</code></li>
</ol>
<h3 id="6f2d7cfe3ad1f5de4c5ea98d2b572c1d">Selenium 驱动 Firefox</h3>
<p>下载 <code>geckodriver.exe</code> 放到 Python 根目录下，将 Python 目录及 Firefox 目录地址添加至<code>环境变量</code>，测试：</p>
<div class="codehilite"><pre>from selenium.webdriver import Firefox
chrome = Firefox()
chrome.get(&quot;https://baidu.com&quot;)
chrome.quit()
</pre></div>


<h3 id="0d98c74797e49d00bcc4c17c9d557a2b">其他</h3>
<p>地址栏会将带 <code>.</code> 的搜索关键字误认为是网址，这时需在关键字前输入一个半角 <code>?</code>，如 <code>?search.json.mozlz4</code> 将会搜索 <code>search.json.mozlz4</code> ，而不是进入一个被误识别的网站。</p>
</div>

<div id="content-comments">
<div id="gitalk-container"></div>
<script>
    window.addEventListener('load', function () {
        const gitalk = new Gitalk({
            clientID: 'aa5daf9e45c43db0bed1',
            clientSecret: '8cc2895c3e012a61d4838829954023ec697c7d4c',
            repo: 'zyxnero.github.com',
            owner: 'zyxnero',
            admin: ['zyxnero'],
            id: location.pathname,
			labels: ['Gitalk'],
			perPage: 15,
			pagerDirection: 'first',
            distractionFreeMode: false
        });
        gitalk.render('gitalk-container');
        document.querySelector('#gitalk-container').addEventListener('click', function (e) {
            e && e.stopPropagation && e.stopPropagation();
        });
    })
</script>
</div>

</div>
<div id="niu2-right-container" class="col-md-3">
<div id="niu2-sidebar-meta" class="niu2-sidebar">
<div class="niu2-sidebar-label"><i class="fa fa-bug"></i>文章作者</div>
<div class="niu2-sidebar-value" itemprop="author">Nero Zheng</div><p class="hidden">By Nero Zheng</p>
<div class="niu2-sidebar-label"><i class="fa fa-calendar"></i>发布时间</div>
<div class="niu2-sidebar-value" itemprop="datePublished">2020-10-01 18:19</div>
<div class="niu2-sidebar-label"><i class="fa fa-book"></i>分类</div>
<div class="niu2-sidebar-value" itemprop="articleSection"><a href="https://lusir.me/record/index.html">记录</a></div>
<div class="niu2-sidebar-label"><i class="fa fa-tag"></i>标签</div>
<div class="niu2-sidebar-inter-value niu2-sidebar-tag" itemprop="keywords"><a href="https://lusir.me/tag/firefox.html">Firefox</a></div>
 
</div>

<div id="niu2-sidebar-toc" class="niu2-sidebar" data-status="closed">
<div class="niu2-sidebar-label">
<i id="niu2-sidebar-toc-ctrl" class="fa fa-plus"></i>目录
</div>
<ol id="niu2-sidebar-toc-list">
<li><a href="#content-heading">Firefox 安装记录</a></li>
    <li><a href='#7f95901ea7943d724c39c5d87416c5a5'>安装及语言包</a></li><li><a href='#a7861ba08459c0205f8db95964e612c3'>便携化</a></li><li><a href='#0563f7233e15ac00e6bcfca103c15c96'>禁用更新</a></li><li><a href='#01820262aa9ad5b130f8f5b86bfd2968'>自定义选项</a></li><li><a href='#2f3f8e816f105ec416109a13c38715c0'>安装扩展</a></li><li><a href='#e57710fdea07b767d19115e4d011305d'>更改默认搜索引擎</a></li><li><a href='#5e0e75872765ca2b4be97f02e8b9f161'>UserChrome 脚本</a></li><li><a href='#97597e33dcb31dc732ff2454e5a15e7c'>使用的 UC 脚本</a></li><li><a href='#930a6f373755d3370c09966d944d0a6d'>使用的油猴脚本</a></li><li><a href='#f085b3dae221da03c58f538db635cd6e'>UserChrome.css 脚本</a></li><li><a href='#6f2d7cfe3ad1f5de4c5ea98d2b572c1d'>Selenium 驱动 Firefox</a></li><li><a href='#0d98c74797e49d00bcc4c17c9d557a2b'>其他</a></li>
<li><a href="#content-comments">评论</a></li>
</ol></div>

<div class="hidden">
<div itemscope itemtype="https://schema.org/BreadcrumbList">
<a href="https://lusir.me" itemprop="url">
<span itemprop="name">Home</span></a>
&nbsp;&gt;&nbsp;
</div>
<div itemscope itemtype="https://schema.org/BreadcrumbList">
<a href="https://lusir.me/record/index.html" itemprop="url">
<span itemprop="name">记录</span></a></div>&nbsp;&gt;&nbsp;Firefox 安装记录
</div>

<div class="hidden">
<ul>
<li class="prev"><a href="https://lusir.me/reinstall-os-for-mi6.html">上一篇</a></li>
</ul>
</div>

<div class="hidden">
<p>相关文章</p>
<ul>
<li><a href="https://lusir.me/delete-firefox-seraching-history.html">清理 Firefox 搜索记录</a></li>
</ul>
 
</div></div>
</div><div id="body-footer" class="col-md-6 col-md-offset-2"><div class="niu2-footer">
<p>Generated by <a href="https://github.com/getpelican/pelican">Pelican</a> with Theme <a href="https://github.com/mawenbao/niu-x2-sidebar">Niu-X2</a> & Hosted by <a href="https://github.com">Github</a>, No Right Reserved<a href="https://plus.google.com/+NeroZheng" rel="author">.</a>
</p>
</div></div>
<script src="/theme/js/jquery-3.5.1.min.js"></script>
<script src="/theme/js/niu2.js"></script>
<script src="/theme/js/bootstrap.min.js"></script>
<script src="/theme/js/fancy-loading.js"></script>
<script src="/theme/js/jquery.fancybox.js"></script>
<script src="/theme/js/gitalk.min.js"></script>
<script>onContentLoaded();</script>

<!-- GoogleAnalytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-E52GGZ98N5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-E52GGZ98N5');
</script>

</body>
</html>